<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>寻宝游戏：古老神庙的谜题</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .page {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.8s ease, opacity 0.8s ease;
            opacity: 0;
            transform: translateX(100%);
            position: absolute;
            pointer-events: none;
        }
        
        .page.active {
            opacity: 1;
            transform: translateX(0);
            pointer-events: all;
        }
        
        .page.previous {
            transform: translateX(-100%);
        }
        
        .container {
            width: 100%;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: center;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.5rem;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            color: #ffd700;
        }
        
        h2 {
            margin-bottom: 15px;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 20px;
            line-height: 1.6;
            font-size: 1.1rem;
        }
        
        .scene {
            height: 300px;
            margin: 20px 0;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            background: #2c3e50;
            border: 3px solid #8b6914;
        }
        
        .scene-content {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .character {
            width: 60px;
            height: 60px;
            background: #e74c3c;
            border-radius: 50%;
            position: absolute;
            transition: all 1s ease;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .object {
            position: absolute;
            transition: all 0.5s ease;
        }
        
        .book {
            width: 40px;
            height: 50px;
            background: #8e44ad;
            border-radius: 5px;
            top: 100px;
            left: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .temple {
            width: 120px;
            height: 100px;
            background: #e74c3c;
            border-radius: 10px 10px 0 0;
            bottom: 50px;
            right: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }
        
        .cave {
            width: 80px;
            height: 60px;
            background: #34495e;
            border-radius: 40px 40px 0 0;
            bottom: 50px;
            left: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
        }
        
        .mountain {
            width: 150px;
            height: 120px;
            background: #2ecc71;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            bottom: 50px;
            left: 300px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 20px;
            font-size: 30px;
        }
        
        .treasure {
            width: 60px;
            height: 40px;
            background: #ffd700;
            border: 3px solid #b8860b;
            border-radius: 5px;
            bottom: 80px;
            right: 170px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            opacity: 0;
            transform: scale(0);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            padding: 12px 25px;
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        button:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .progress-container {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .progress-bar {
            height: 20px;
            background: #34495e;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #f39c12, #e74c3c);
            transition: width 0.5s ease;
        }
        
        .status-text {
            text-align: center;
            font-size: 1.2rem;
            min-height: 60px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .message-log {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            height: 150px;
            overflow-y: auto;
            margin-top: 20px;
            text-align: left;
        }
        
        .message {
            padding: 8px;
            border-left: 3px solid #f39c12;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0 5px 5px 0;
            animation: fadeIn 0.5s ease;
        }
        
        .success { border-left-color: #2ecc71; }
        .danger { border-left-color: #e74c3c; }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 8px 15px;
            font-size: 0.9rem;
            background: linear-gradient(135deg, #3498db, #2980b9);
        }
        
        .animated-text {
            animation: fadeIn 1s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes treasureGlow {
            0% { box-shadow: 0 0 5px gold; }
            50% { box-shadow: 0 0 20px gold; }
            100% { box-shadow: 0 0 5px gold; }
        }
        
        .bounce { animation: bounce 0.5s ease; }
        .pulse { animation: pulse 2s infinite; }
        .treasure-glow { animation: treasureGlow 2s infinite; }
        
        .page-indicator {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 100;
        }
        
        .page-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .page-dot.active {
            background: #f39c12;
            transform: scale(1.2);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .scene {
                height: 200px;
            }
            
            .character {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            
            .book, .temple, .cave, .mountain {
                transform: scale(0.8);
            }
        }
    </style>
</head>
<body>
    <!-- 封面页 -->
    <div class="page active" id="cover-page">
        <div class="container">
            <h1 class="animated-text">寻宝游戏：古老神庙的谜题</h1>
            <div class="scene">
                <div class="scene-content">
                    <div class="character pulse">🧭</div>
                    <div class="object book">📚</div>
                    <div class="object temple">🛕</div>
                    <div class="object cave">🕳️</div>
                    <div class="object mountain">⛰️</div>
                    <div class="object treasure">💎</div>
                </div>
            </div>
            <p>踏上冒险之旅，解开古老谜题，寻找传说中的宝藏！</p>
            <div class="controls">
                <button id="start-game">开始游戏</button>
            </div>
        </div>
    </div>
    
    <!-- 图书馆页 -->
    <div class="page" id="library-page">
        <div class="container">
            <h2>古老图书馆</h2>
            <div class="scene">
                <div class="scene-content">
                    <div class="character" id="library-character">🧭</div>
                    <div class="object book pulse" id="ancient-book">📚</div>
                </div>
            </div>
            <p>你来到了古老的图书馆，这里充满了尘封的书籍和神秘的气息。</p>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill-1"></div>
                </div>
                <div class="status-text" id="status-text-1">寻找线索...</div>
            </div>
            <div class="action-buttons" id="action-buttons-1">
                <button class="action-btn" data-action="search">搜索书架</button>
                <button class="action-btn" data-action="examine">检查古书</button>
                <button class="action-btn" data-action="decode">解读地图</button>
            </div>
            <div class="message-log" id="message-log-1"></div>
            <div class="controls">
                <button class="nav-btn" data-target="cover-page">返回</button>
                <button class="nav-btn" data-target="cave-page" id="next-from-library" disabled>前往洞穴</button>
            </div>
        </div>
    </div>
    
    <!-- 洞穴页 -->
    <div class="page" id="cave-page">
        <div class="container">
            <h2>神秘洞穴</h2>
            <div class="scene">
                <div class="scene-content">
                    <div class="character" id="cave-character">🧭</div>
                    <div class="object cave">🕳️</div>
                </div>
            </div>
            <p>你进入了黑暗的洞穴，这里充满了未知的危险和秘密。</p>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill-2"></div>
                </div>
                <div class="status-text" id="status-text-2">探索洞穴...</div>
            </div>
            <div class="action-buttons" id="action-buttons-2">
                <button class="action-btn" data-action="explore">深入探索</button>
                <button class="action-btn" data-action="paintings">查看壁画</button>
                <button class="action-btn" data-action="search-cave">寻找线索</button>
            </div>
            <div class="message-log" id="message-log-2"></div>
            <div class="controls">
                <button class="nav-btn" data-target="library-page">返回图书馆</button>
                <button class="nav-btn" data-target="mountain-page" id="next-from-cave" disabled>前往高山</button>
            </div>
        </div>
    </div>
    
    <!-- 高山页 -->
    <div class="page" id="mountain-page">
        <div class="container">
            <h2>高山之巅</h2>
            <div class="scene">
                <div class="scene-content">
                    <div class="character" id="mountain-character">🧭</div>
                    <div class="object mountain">⛰️</div>
                </div>
            </div>
            <p>你登上了高山之巅，从这里可以俯瞰整个山谷。</p>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill-3"></div>
                </div>
                <div class="status-text" id="status-text-3">寻找线索...</div>
            </div>
            <div class="action-buttons" id="action-buttons-3">
                <button class="action-btn" data-action="search-mountain">搜索山顶</button>
                <button class="action-btn" data-action="view">观察地形</button>
                <button class="action-btn" data-action="find-path">寻找路径</button>
            </div>
            <div class="message-log" id="message-log-3"></div>
            <div class="controls">
                <button class="nav-btn" data-target="cave-page">返回洞穴</button>
                <button class="nav-btn" data-target="temple-page" id="next-from-mountain" disabled>前往神庙</button>
            </div>
        </div>
    </div>
    
    <!-- 神庙页 -->
    <div class="page" id="temple-page">
        <div class="container">
            <h2>古老神庙</h2>
            <div class="scene">
                <div class="scene-content">
                    <div class="character" id="temple-character">🧭</div>
                    <div class="object temple">🛕</div>
                    <div class="object treasure" id="treasure-chest">💎</div>
                </div>
            </div>
            <p>你来到了古老的神庙，这里充满了神秘的能量。</p>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill-4"></div>
                </div>
                <div class="status-text" id="status-text-4">解开谜题...</div>
            </div>
            <div class="action-buttons" id="action-buttons-4">
                <button class="action-btn" data-action="puzzle">解开谜题</button>
                <button class="action-btn" data-action="key">寻找钥匙</button>
                <button class="action-btn" data-action="open">打开宝箱</button>
            </div>
            <div class="message-log" id="message-log-4"></div>
            <div class="controls">
                <button class="nav-btn" data-target="mountain-page">返回高山</button>
                <button class="nav-btn" data-target="treasure-page" id="next-from-temple" disabled>查看宝藏</button>
            </div>
        </div>
    </div>
    
    <!-- 宝藏页 -->
    <div class="page" id="treasure-page">
        <div class="container">
            <h2>宝藏发现</h2>
            <div class="scene">
                <div class="scene-content">
                    <div class="character">🧭</div>
                    <div class="object treasure treasure-glow" style="opacity: 1; transform: scale(1.5);">💎</div>
                </div>
            </div>
            <p>恭喜你！你成功找到了传说中的宝藏！</p>
            <div class="message-log" id="message-log-5">
                <div class="message success">你解开了所有谜题，找到了智慧之石！</div>
                <div class="message success">这颗宝石将赋予你无尽的知识和智慧！</div>
            </div>
            <div class="controls">
                <button id="play-again">再玩一次</button>
            </div>
        </div>
    </div>
    
    <!-- 页面指示器 -->
    <div class="page-indicator">
        <div class="page-dot active" data-page="cover-page"></div>
        <div class="page-dot" data-page="library-page"></div>
        <div class="page-dot" data-page="cave-page"></div>
        <div class="page-dot" data-page="mountain-page"></div>
        <div class="page-dot" data-page="temple-page"></div>
        <div class="page-dot" data-page="treasure-page"></div>
    </div>

    <script>
        // 游戏状态管理
        class TreasureGame {
            constructor() {
                this.currentPage = 'cover-page';
                this.pages = [
                    'cover-page', 
                    'library-page', 
                    'cave-page', 
                    'mountain-page', 
                    'temple-page', 
                    'treasure-page'
                ];
                this.gameState = {
                    hasMap: false,
                    hasDecodedMap: false,
                    hasCaveClue: false,
                    hasMountainClue: false,
                    hasKey: false,
                    hasSolvedPuzzle: false,
                    hasFoundTreasure: false
                };
                
                this.initializeEventListeners();
                this.initializePageIndicator();
            }
            
            initializeEventListeners() {
                // 开始游戏按钮
                document.getElementById('start-game').addEventListener('click', () => {
                    this.navigateTo('library-page');
                });
                
                // 再玩一次按钮
                document.getElementById('play-again').addEventListener('click', () => {
                    this.resetGame();
                    this.navigateTo('cover-page');
                });
                
                // 导航按钮
                document.querySelectorAll('.nav-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const targetPage = e.target.getAttribute('data-target');
                        this.navigateTo(targetPage);
                    });
                });
                
                // 各页面的动作按钮
                this.initializeActionButtons();
            }
            
            initializeActionButtons() {
                // 图书馆页面动作
                document.querySelectorAll('#action-buttons-1 button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const action = e.target.getAttribute('data-action');
                        this.performLibraryAction(action);
                    });
                });
                
                // 洞穴页面动作
                document.querySelectorAll('#action-buttons-2 button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const action = e.target.getAttribute('data-action');
                        this.performCaveAction(action);
                    });
                });
                
                // 高山页面动作
                document.querySelectorAll('#action-buttons-3 button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const action = e.target.getAttribute('data-action');
                        this.performMountainAction(action);
                    });
                });
                
                // 神庙页面动作
                document.querySelectorAll('#action-buttons-4 button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const action = e.target.getAttribute('data-action');
                        this.performTempleAction(action);
                    });
                });
            }
            
            initializePageIndicator() {
                const dots = document.querySelectorAll('.page-dot');
                dots.forEach(dot => {
                    dot.addEventListener('click', () => {
                        const page = dot.getAttribute('data-page');
                        this.navigateTo(page);
                    });
                });
            }
            
            navigateTo(pageId) {
                // 更新页面指示器
                document.querySelectorAll('.page-dot').forEach(dot => {
                    dot.classList.remove('active');
                    if (dot.getAttribute('data-page') === pageId) {
                        dot.classList.add('active');
                    }
                });
                
                // 隐藏当前页面
                const currentPage = document.getElementById(this.currentPage);
                currentPage.classList.remove('active');
                currentPage.classList.add('previous');
                
                // 显示新页面
                const newPage = document.getElementById(pageId);
                newPage.classList.remove('previous');
                newPage.classList.add('active');
                
                this.currentPage = pageId;
                
                // 为新页面添加动画
                this.animatePageContent(pageId);
            }
            
            animatePageContent(pageId) {
                switch(pageId) {
                    case 'library-page':
                        this.animateLibrary();
                        break;
                    case 'cave-page':
                        this.animateCave();
                        break;
                    case 'mountain-page':
                        this.animateMountain();
                        break;
                    case 'temple-page':
                        this.animateTemple();
                        break;
                    case 'treasure-page':
                        this.animateTreasure();
                        break;
                }
            }
            
            animateLibrary() {
                const character = document.getElementById('library-character');
                const book = document.getElementById('ancient-book');
                
                // 重置位置
                character.style.left = '100px';
                character.style.top = '150px';
                
                // 动画：角色移动到书的位置
                setTimeout(() => {
                    character.style.left = '180px';
                    character.style.top = '120px';
                    character.classList.add('bounce');
                    
                    setTimeout(() => {
                        character.classList.remove('bounce');
                    }, 500);
                }, 500);
            }
            
            animateCave() {
                const character = document.getElementById('cave-character');
                
                // 重置位置
                character.style.left = '300px';
                character.style.top = '100px';
                
                // 动画：角色移动到洞穴
                setTimeout(() => {
                    character.style.left = '150px';
                    character.style.top = '150px';
                    character.classList.add('bounce');
                    
                    setTimeout(() => {
                        character.classList.remove('bounce');
                    }, 500);
                }, 500);
            }
            
            animateMountain() {
                const character = document.getElementById('mountain-character');
                
                // 重置位置
                character.style.left = '100px';
                character.style.top = '100px';
                
                // 动画：角色移动到山顶
                setTimeout(() => {
                    character.style.left = '400px';
                    character.style.top = '80px';
                    character.classList.add('bounce');
                    
                    setTimeout(() => {
                        character.classList.remove('bounce');
                    }, 500);
                }, 500);
            }
            
            animateTemple() {
                const character = document.getElementById('temple-character');
                const treasure = document.getElementById('treasure-chest');
                
                // 重置位置
                character.style.left = '100px';
                character.style.top = '150px';
                treasure.style.opacity = '0';
                treasure.style.transform = 'scale(0)';
                
                // 动画：角色移动到神庙
                setTimeout(() => {
                    character.style.left = '500px';
                    character.style.top = '150px';
                    character.classList.add('bounce');
                    
                    setTimeout(() => {
                        character.classList.remove('bounce');
                        
                        // 显示宝藏
                        if (this.gameState.hasKey && this.gameState.hasSolvedPuzzle) {
                            treasure.style.opacity = '1';
                            treasure.style.transform = 'scale(1)';
                            treasure.classList.add('pulse');
                        }
                    }, 500);
                }, 500);
            }
            
            animateTreasure() {
                const treasure = document.querySelector('#treasure-page .treasure');
                treasure.classList.add('treasure-glow');
            }
            
            async performLibraryAction(action) {
                const messageLog = document.getElementById('message-log-1');
                const nextButton = document.getElementById('next-from-library');
                const progressFill = document.getElementById('progress-fill-1');
                const statusText = document.getElementById('status-text-1');
                
                // 禁用所有动作按钮
                document.querySelectorAll('#action-buttons-1 button').forEach(btn => {
                    btn.disabled = true;
                });
                
                // 模拟延迟
                await this.delay(1000);
                
                let message;
                
                switch(action) {
                    case 'search':
                        message = "你在书架上找到了一张古老的地图！";
                        this.gameState.hasMap = true;
                        progressFill.style.width = '33%';
                        statusText.textContent = "找到地图！";
                        break;
                    case 'examine':
                        message = "你发现古书中记载了神庙的秘密入口！";
                        this.gameState.hasDecodedMap = true;
                        progressFill.style.width = '66%';
                        statusText.textContent = "获得重要线索！";
                        break;
                    case 'decode':
                        if (this.gameState.hasMap) {
                            message = "你成功解读了地图，发现宝藏藏在神庙中！";
                            progressFill.style.width = '100%';
                            statusText.textContent = "地图解读完成！";
                            nextButton.disabled = false;
                        } else {
                            message = "你需要先找到地图才能进行解读！";
                            this.addMessage(messageLog, message, 'danger');
                            
                            // 重新启用按钮
                            document.querySelectorAll('#action-buttons-1 button').forEach(btn => {
                                btn.disabled = false;
                            });
                            return;
                        }
                        break;
                }
                
                this.addMessage(messageLog, message, 'success');
                
                // 如果已经完成所有条件，启用继续按钮
                if (this.gameState.hasMap && this.gameState.hasDecodedMap) {
                    nextButton.disabled = false;
                }
                
                // 重新启用按钮
                document.querySelectorAll('#action-buttons-1 button').forEach(btn => {
                    btn.disabled = false;
                });
            }
            
            async performCaveAction(action) {
                const messageLog = document.getElementById('message-log-2');
                const nextButton = document.getElementById('next-from-cave');
                const progressFill = document.getElementById('progress-fill-2');
                const statusText = document.getElementById('status-text-2');
                
                // 禁用所有动作按钮
                document.querySelectorAll('#action-buttons-2 button').forEach(btn => {
                    btn.disabled = true;
                });
                
                // 模拟延迟
                await this.delay(1000);
                
                let message;
                
                switch(action) {
                    case 'explore':
                        message = "你在洞穴深处发现了一幅神秘的壁画！";
                        this.gameState.hasCaveClue = true;
                        progressFill.style.width = '33%';
                        statusText.textContent = "发现壁画！";
                        break;
                    case 'paintings':
                        if (this.gameState.hasCaveClue) {
                            message = "壁画显示宝藏藏在神庙深处！";
                            progressFill.style.width = '66%';
                            statusText.textContent = "解读壁画成功！";
                        } else {
                            message = "你需要先探索洞穴找到壁画！";
                            this.addMessage(messageLog, message, 'danger');
                            
                            // 重新启用按钮
                            document.querySelectorAll('#action-buttons-2 button').forEach(btn => {
                                btn.disabled = false;
                            });
                            return;
                        }
                        break;
                    case 'search-cave':
                        message = "你在洞穴中找到了一把古老的钥匙！";
                        this.gameState.hasKey = true;
                        progressFill.style.width = '100%';
                        statusText.textContent = "找到钥匙！";
                        nextButton.disabled = false;
                        break;
                }
                
                this.addMessage(messageLog, message, 'success');
                
                // 如果已经完成所有条件，启用继续按钮
                if (this.gameState.hasCaveClue && this.gameState.hasKey) {
                    nextButton.disabled = false;
                }
                
                // 重新启用按钮
                document.querySelectorAll('#action-buttons-2 button').forEach(btn => {
                    btn.disabled = false;
                });
            }
            
            async performMountainAction(action) {
                const messageLog = document.getElementById('message-log-3');
                const nextButton = document.getElementById('next-from-mountain');
                const progressFill = document.getElementById('progress-fill-3');
                const statusText = document.getElementById('status-text-3');
                
                // 禁用所有动作按钮
                document.querySelectorAll('#action-buttons-3 button').forEach(btn => {
                    btn.disabled = true;
                });
                
                // 模拟延迟
                await this.delay(1000);
                
                let message;
                
                switch(action) {
                    case 'search-mountain':
                        message = "你在山顶找到了神庙的隐藏入口！";
                        this.gameState.hasMountainClue = true;
                        progressFill.style.width = '33%';
                        statusText.textContent = "发现入口！";
                        break;
                    case 'view':
                        if (this.gameState.hasMountainClue) {
                            message = "你从山顶看到了神庙的全貌！";
                            progressFill.style.width = '66%';
                            statusText.textContent = "观察完成！";
                        } else {
                            message = "你需要先搜索山顶找到入口！";
                            this.addMessage(messageLog, message, 'danger');
                            
                            // 重新启用按钮
                            document.querySelectorAll('#action-buttons-3 button').forEach(btn => {
                                btn.disabled = false;
                            });
                            return;
                        }
                        break;
                    case 'find-path':
                        message = "你找到了一条通往神庙的秘密路径！";
                        progressFill.style.width = '100%';
                        statusText.textContent = "找到路径！";
                        nextButton.disabled = false;
                        break;
                }
                
                this.addMessage(messageLog, message, 'success');
                
                // 如果已经完成所有条件，启用继续按钮
                if (this.gameState.hasMountainClue) {
                    nextButton.disabled = false;
                }
                
                // 重新启用按钮
                document.querySelectorAll('#action-buttons-3 button').forEach(btn => {
                    btn.disabled = false;
                });
            }
            
            async performTempleAction(action) {
                const messageLog = document.getElementById('message-log-4');
                const nextButton = document.getElementById('next-from-temple');
                const progressFill = document.getElementById('progress-fill-4');
                const statusText = document.getElementById('status-text-4');
                const treasure = document.getElementById('treasure-chest');
                
                // 禁用所有动作按钮
                document.querySelectorAll('#action-buttons-4 button').forEach(btn => {
                    btn.disabled = true;
                });
                
                // 模拟延迟
                await this.delay(1000);
                
                let message;
                
                switch(action) {
                    case 'puzzle':
                        message = "你成功解开了神庙的古老谜题！";
                        this.gameState.hasSolvedPuzzle = true;
                        progressFill.style.width = '33%';
                        statusText.textContent = "谜题解开！";
                        break;
                    case 'key':
                        if (this.gameState.hasKey) {
                            message = "你已经有了钥匙！";
                            progressFill.style.width = '66%';
                            statusText.textContent = "钥匙已准备！";
                        } else {
                            message = "你需要在洞穴中寻找钥匙！";
                            this.addMessage(messageLog, message, 'danger');
                            
                            // 重新启用按钮
                            document.querySelectorAll('#action-buttons-4 button').forEach(btn => {
                                btn.disabled = false;
                            });
                            return;
                        }
                        break;
                    case 'open':
                        if (this.gameState.hasKey && this.gameState.hasSolvedPuzzle) {
                            message = "宝箱打开了！里面是传说中的智慧之石！";
                            progressFill.style.width = '100%';
                            statusText.textContent = "宝藏找到！";
                            
                            // 显示宝藏动画
                            treasure.style.opacity = '1';
                            treasure.style.transform = 'scale(1)';
                            treasure.classList.add('pulse');
                            
                            // 启用继续按钮
                            nextButton.disabled = false;
                        } else {
                            message = "你需要先找到钥匙并解开谜题才能打开宝箱！";
                            this.addMessage(messageLog, message, 'danger');
                            
                            // 重新启用按钮
                            document.querySelectorAll('#action-buttons-4 button').forEach(btn => {
                                btn.disabled = false;
                            });
                            return;
                        }
                        break;
                }
                
                this.addMessage(messageLog, message, 'success');
                
                // 如果已经完成所有条件，启用继续按钮
                if (this.gameState.hasKey && this.gameState.hasSolvedPuzzle && action === 'open') {
                    nextButton.disabled = false;
                }
                
                // 重新启用按钮
                document.querySelectorAll('#action-buttons-4 button').forEach(btn => {
                    btn.disabled = false;
                });
            }
            
            addMessage(messageLog, text, type = '') {
                const messageElement = document.createElement('div');
                messageElement.className = `message ${type}`;
                messageElement.textContent = text;
                messageLog.appendChild(messageElement);
                messageLog.scrollTop = messageLog.scrollHeight;
            }
            
            resetGame() {
                // 重置游戏状态
                this.gameState = {
                    hasMap: false,
                    hasDecodedMap: false,
                    hasCaveClue: false,
                    hasMountainClue: false,
                    hasKey: false,
                    hasSolvedPuzzle: false,
                    hasFoundTreasure: false
                };
                
                // 重置进度条
                document.querySelectorAll('.progress-fill').forEach(fill => {
                    fill.style.width = '0%';
                });
                
                // 重置状态文本
                document.querySelectorAll('.status-text').forEach(text => {
                    if (text.id === 'status-text-1') text.textContent = '寻找线索...';
                    if (text.id === 'status-text-2') text.textContent = '探索洞穴...';
                    if (text.id === 'status-text-3') text.textContent = '寻找线索...';
                    if (text.id === 'status-text-4') text.textContent = '解开谜题...';
                });
                
                // 清空消息日志
                document.querySelectorAll('.message-log').forEach(log => {
                    if (log.id !== 'message-log-5') log.innerHTML = '';
                });
                
                // 禁用继续按钮
                document.querySelectorAll('.nav-btn[data-target]').forEach(btn => {
                    if (!btn.getAttribute('data-target').includes('cover-page') && 
                        !btn.getAttribute('data-target').includes('library-page')) {
                        btn.disabled = true;
                    }
                });
                
                // 启用动作按钮
                document.querySelectorAll('.action-btn').forEach(btn => {
                    btn.disabled = false;
                });
            }
            
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // 初始化游戏
        document.addEventListener('DOMContentLoaded', () => {
            new TreasureGame();
        });
    </script>
</body>
</html>