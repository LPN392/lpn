<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯»å®æ¸¸æˆï¼šå¤è€ç¥åº™çš„è°œé¢˜</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        /* åŸºç¡€å…¨å±è®¾ç½® */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        /* ä¸»åº”ç”¨å®¹å™¨è®¾ç½®ä¸ºå…¨å±flexå¸ƒå±€ */
        #app {
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        /* é¡µé¢å®¹å™¨å±…ä¸­æ˜¾ç¤º */
        .page-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow-y: auto;
            padding: 20px;
        }

        .page {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.8s ease, opacity 0.8s ease;
            opacity: 0;
            transform: translateX(100%);
            position: absolute;
            pointer-events: none;
            flex: 1;
        }
        
        /* ç¡®ä¿æ¯ä¸ªé¡µé¢å†…å®¹å±…ä¸­ */
        .page.active {
            opacity: 1;
            transform: translateX(0);
            pointer-events: all;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }
        
        .page.previous {
            transform: translateX(-100%);
        }
        
        /* å®¹å™¨å†…å®¹å±…ä¸­ */
        .container {
            width: 100%;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            max-width: 90%;
            max-height: 100%;
            overflow: auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            color: #ffd700;
        }
        
        h2 {
            margin-bottom: 15px;
            color: #f39c12;
            font-size: clamp(1.5rem, 4vw, 2rem);
        }
        
        h3 {
            margin: 15px 0;
            color: #ffd700;
            font-size: clamp(1.2rem, 3vw, 1.5rem);
        }
        
        p {
            margin-bottom: 20px;
            line-height: 1.6;
            font-size: clamp(1rem, 2.5vw, 1.1rem);
        }
        
        /* åœºæ™¯å†…å®¹å±…ä¸­ */
        .scene {
            height: clamp(200px, 40vw, 300px);
            margin: 20px 0;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            background: #2c3e50;
            border: 3px solid #8b6914;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .scene-content {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .character {
            width: clamp(40px, 8vw, 60px);
            height: clamp(40px, 8vw, 60px);
            background: #e74c3c;
            border-radius: 50%;
            position: absolute;
            transition: all 1s ease;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(18px, 4vw, 24px);
        }
        
        .object {
            position: absolute;
            transition: all 0.5s ease;
        }
        
        .book {
            width: clamp(30px, 6vw, 40px);
            height: clamp(40px, 8vw, 50px);
            background: #8e44ad;
            border-radius: 5px;
            top: clamp(70px, 15vw, 100px);
            left: clamp(150px, 25vw, 200px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(18px, 4vw, 24px);
        }
        
        .temple {
            width: clamp(80px, 15vw, 120px);
            height: clamp(70px, 12vw, 100px);
            background: #e74c3c;
            border-radius: 10px 10px 0 0;
            bottom: clamp(30px, 8vw, 50px);
            right: clamp(100px, 20vw, 150px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(24px, 6vw, 40px);
        }
        
        .cave {
            width: clamp(60px, 10vw, 80px);
            height: clamp(40px, 8vw, 60px);
            background: #34495e;
            border-radius: 40px 40px 0 0;
            bottom: clamp(30px, 8vw, 50px);
            left: clamp(70px, 12vw, 100px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(20px, 5vw, 30px);
        }
        
        .mountain {
            width: clamp(100px, 18vw, 150px);
            height: clamp(80px, 15vw, 120px);
            background: #2ecc71;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            bottom: clamp(30px, 8vw, 50px);
            left: clamp(200px, 35vw, 300px);
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 10px;
            font-size: clamp(20px, 5vw, 30px);
        }
        
        .treasure {
            width: clamp(40px, 8vw, 60px);
            height: clamp(30px, 6vw, 40px);
            background: #ffd700;
            border: 3px solid #b8860b;
            border-radius: 5px;
            bottom: clamp(50px, 10vw, 80px);
            right: clamp(120px, 22vw, 170px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(18px, 4vw, 24px);
            opacity: 0;
            transform: scale(0);
        }
        
        /* æ§åˆ¶æŒ‰é’®å±…ä¸­ */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: clamp(10px, 2.5vw, 12px) clamp(15px, 4vw, 25px);
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        button:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* è¿›åº¦æ¡å’Œæ¶ˆæ¯æ—¥å¿—å±…ä¸­ */
        .progress-container {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 500px;
            margin: 15px auto;
        }
        
        .progress-bar {
            height: 20px;
            background: #34495e;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #f39c12, #e74c3c);
            transition: width 0.5s ease;
        }
        
        .status-text {
            text-align: center;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            min-height: 60px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .message-log {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            height: clamp(120px, 25vw, 150px);
            overflow-y: auto;
            margin-top: 20px;
            text-align: left;
            width: 100%;
            max-width: 500px;
            margin: 15px auto;
        }
        
        .message {
            padding: 8px;
            border-left: 3px solid #f39c12;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0 5px 5px 0;
            animation: fadeIn 0.5s ease;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
        }
        
        .success { border-left-color: #2ecc71; }
        .danger { border-left-color: #e74c3c; }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 8px 15px;
            font-size: clamp(0.8rem, 2vw, 0.9rem);
            background: linear-gradient(135deg, #3498db, #2980b9);
        }
        
        .animated-text {
            animation: fadeIn 1s ease;
        }
        
        /* åœ°å›¾å®¹å™¨å±…ä¸­ */
        .map-container {
            width: 100%;
            height: clamp(300px, 60vw, 450px);
            position: relative;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="800" height="450" viewBox="0 0 800 450"><rect width="800" height="450" fill="%231e3c72"/><path d="M100,350 L150,300 L200,330 L250,250 L300,300 L350,230 L400,270 L450,200 L500,250 L550,170 L600,230 L650,150 L700,200" stroke="%23395d33" stroke-width="10" fill="none"/><path d="M100,350 L150,300 L200,330 L250,250 L300,300 L350,230 L400,270 L450,200 L500,250 L550,170 L600,230 L650,150 L700,200" stroke="%235e9c4a" stroke-width="5" fill="none"/></svg>') no-repeat center center;
            background-size: cover;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            border: 3px solid #8b6914;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
        }
        
        .location {
            position: absolute;
            width: clamp(70px, 12vw, 100px);
            height: clamp(70px, 12vw, 100px);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: clamp(20px, 4vw, 30px);
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.2);
            border: 4px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }
        
        .location:hover {
            transform: scale(1.15);
            background: rgba(255, 255, 255, 0.3);
            border-color: #ffd700;
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }
        
        .location-name {
            font-size: clamp(10px, 2vw, 14px);
            font-weight: bold;
            margin-top: 5px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            color: #fff;
        }
        
        .location-library {
            top: clamp(80px, 15vw, 120px);
            left: clamp(80px, 15vw, 120px);
        }
        
        .location-cave {
            top: clamp(170px, 28vw, 250px);
            left: clamp(190px, 31vw, 280px);
        }
        
        .location-mountain {
            top: clamp(70px, 12vw, 100px);
            left: clamp(320px, 50vw, 480px);
        }
        
        .location-temple {
            top: clamp(190px, 31vw, 280px);
            left: clamp(390px, 60vw, 580px);
        }
        
        .location-treasure {
            top: clamp(120px, 20vw, 180px);
            left: clamp(450px, 70vw, 680px);
            opacity: 0.5;
        }
        
        .location-completed {
            background: rgba(46, 204, 113, 0.4);
            border-color: #2ecc71;
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
        }
        
        .location-available {
            background: rgba(243, 156, 18, 0.4);
            border-color: #f39c12;
            animation: pulse 2s infinite;
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.3);
        }
        
        .location-locked {
            background: rgba(127, 140, 141, 0.3);
            border-color: #7f8c8d;
            cursor: not-allowed;
            filter: grayscale(0.7);
        }
        
        /* æ•°å­¦è°œé¢˜æ ·å¼ */
        .puzzle-container {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .puzzle-question {
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            margin-bottom: 15px;
            color: #ffd700;
        }
        
        .puzzle-options {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .puzzle-option {
            padding: 10px 20px;
            background: rgba(52, 152, 219, 0.7);
            border: 2px solid #3498db;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
        }
        
        .puzzle-option:hover {
            background: rgba(52, 152, 219, 0.9);
            transform: translateY(-2px);
        }
        
        .puzzle-input {
            padding: 10px;
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
            border: 2px solid #3498db;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            text-align: center;
            width: clamp(120px, 20vw, 150px);
            margin: 10px;
        }
        
        .puzzle-submit {
            padding: 10px 20px;
            background: #2ecc71;
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
        }
        
        .puzzle-submit:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }
        
        /* è°ƒæ•´éŸ³ä¹æ§åˆ¶ä½ç½® */
        .music-controls {
            position: fixed;
            top: 70px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }
        
        .music-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s ease;
        }
        
        .music-btn:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: scale(1.1);
        }
        
        .music-btn.muted {
            background: rgba(231, 76, 60, 0.7);
        }
        
        /* è°ƒæ•´å¯¼èˆªæ ä½ç½®ï¼Œä½¿å…¶åœ¨é¡¶éƒ¨å›ºå®š */
        .nav-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }
        
        .nav-title {
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            font-weight: bold;
            color: #ffd700;
        }
        
        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .nav-link {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-size: clamp(0.8rem, 2vw, 1rem);
        }
        
        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .nav-link.active {
            background: rgba(243, 156, 18, 0.5);
        }
        
        /* ç”¨æˆ·ç®¡ç†å’Œæ’è¡Œé¡µé¢æ ·å¼ */
        .user-management, .ranking-page {
            width: 100%;
            max-width: 800px;
        }
        
        /* è¡¨å•å±…ä¸­ */
        .user-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
            text-align: left;
            margin: 20px auto;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .form-label {
            font-weight: bold;
            color: #f39c12;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
        }
        
        .form-input {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #34495e;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
        }
        
        /* æ’åè¡¨æ ¼å±…ä¸­ */
        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            overflow-x: auto;
            display: block;
            margin: 20px auto;
        }
        
        .ranking-table table {
            width: 100%;
            min-width: 500px;
        }
        
        .ranking-table th, .ranking-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: clamp(0.8rem, 2vw, 1rem);
        }
        
        .ranking-table th {
            background: rgba(243, 156, 18, 0.3);
            color: #f39c12;
        }
        
        .ranking-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .ranking-position {
            font-weight: bold;
            color: #ffd700;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes treasureGlow {
            0% { box-shadow: 0 0 5px gold; }
            50% { box-shadow: 0 0 20px gold; }
            100% { box-shadow: 0 0 5px gold; }
        }
        
        .bounce { animation: bounce 0.5s ease; }
        .pulse { animation: pulse 2s infinite; }
        .treasure-glow { animation: treasureGlow 2s infinite; }
        
        /* è°ƒæ•´é¡µé¢æŒ‡ç¤ºå™¨ä½ç½® */
        .page-indicator {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 100;
        }
        
        .page-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .page-dot.active {
            background: #f39c12;
            transform: scale(1.2);
        }
        
        /* ç§»åŠ¨è®¾å¤‡ä¼˜åŒ– */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .page-container {
                padding: 10px;
                padding-top: 80px;
                padding-bottom: 50px;
            }
            
            .container {
                padding: 15px;
            }
            
            .scene {
                height: 200px;
            }
            
            .character {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            
            .book, .temple, .cave, .mountain {
                transform: scale(0.8);
            }
            
            .map-container {
                height: 350px;
            }
            
            .location {
                width: 70px;
                height: 70px;
                font-size: 24px;
            }
            
            .location-name {
                font-size: 12px;
            }
            
            .nav-bar {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }
            
            .nav-links {
                justify-content: center;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .puzzle-options {
                flex-direction: column;
                align-items: center;
            }
            
            .music-controls {
                top: 10px;
                right: 10px;
            }
            
            .page-indicator {
                bottom: 10px;
            }
        }
        
        @media (max-width: 480px) {
            .map-container {
                height: 250px;
            }
            
            .location {
                width: 50px;
                height: 50px;
                font-size: 18px;
            }
            
            .location-name {
                font-size: 10px;
            }
            
            .location-library {
                top: 60px;
                left: 50px;
            }
            
            .location-cave {
                top: 120px;
                left: 120px;
            }
            
            .location-mountain {
                top: 50px;
                left: 200px;
            }
            
            .location-temple {
                top: 130px;
                left: 250px;
            }
            
            .location-treasure {
                top: 80px;
                left: 300px;
            }
            
            .ranking-table {
                font-size: 0.8rem;
            }
            
            .ranking-table th, .ranking-table td {
                padding: 8px 10px;
            }
        }
        
        /* æ¨ªå±è®¾å¤‡ä¼˜åŒ– */
        @media (max-height: 500px) and (orientation: landscape) {
            .scene {
                height: 150px;
            }
            
            .message-log {
                height: 80px;
            }
            
            .container {
                padding: 10px;
            }
            
            .progress-container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- å¯¼èˆªæ ç»„ä»¶ -->
        <navigation-bar 
            :current-page="currentPage" 
            @navigate="navigateTo">
        </navigation-bar>
        
        <!-- éŸ³ä¹æ§åˆ¶ç»„ä»¶ -->
        <music-controls 
            :music-enabled="musicEnabled" 
            :muted="muted"
            @toggle-music="toggleMusic"
            @toggle-mute="toggleMute">
        </music-controls>
        
        <!-- é¡µé¢å®¹å™¨ -->
        <div class="page-container">
            <!-- å°é¢é¡µ -->
            <cover-page 
                v-if="currentPage === 'cover-page'"
                @start-game="navigateTo('library-page')"
                @view-map="navigateTo('map-page')">
            </cover-page>
            
            <!-- åœ°å›¾é¡µ -->
            <map-page 
                v-if="currentPage === 'map-page'"
                :game-state="gameState"
                @navigate="navigateTo">
            </map-page>
            
            <!-- å›¾ä¹¦é¦†é¡µ -->
            <library-page 
                v-if="currentPage === 'library-page'"
                :game-state="gameState"
                @update-game-state="updateGameState"
                @navigate="navigateTo">
            </library-page>
            
            <!-- æ´ç©´é¡µ -->
            <cave-page 
                v-if="currentPage === 'cave-page'"
                :game-state="gameState"
                @update-game-state="updateGameState"
                @navigate="navigateTo">
            </cave-page>
            
            <!-- é«˜å±±é¡µ -->
            <mountain-page 
                v-if="currentPage === 'mountain-page'"
                :game-state="gameState"
                @update-game-state="updateGameState"
                @navigate="navigateTo">
            </mountain-page>
            
            <!-- ç¥åº™é¡µ -->
            <temple-page 
                v-if="currentPage === 'temple-page'"
                :game-state="gameState"
                @update-game-state="updateGameState"
                @navigate="navigateTo">
            </temple-page>
            
            <!-- å®è—é¡µ -->
            <treasure-page 
                v-if="currentPage === 'treasure-page'"
                @play-again="resetGame">
            </treasure-page>
            
            <!-- ç”¨æˆ·ç®¡ç†é¡µ -->
            <user-management 
                v-if="currentPage === 'user-management'"
                :users="users"
                @add-user="addUser"
                @delete-user="deleteUser">
            </user-management>
            
            <!-- æ’è¡Œé¡µ -->
            <ranking-page 
                v-if="currentPage === 'ranking-page'"
                :rankings="rankings">
            </ranking-page>
        </div>
        
        <!-- é¡µé¢æŒ‡ç¤ºå™¨ -->
        <page-indicator 
            :current-page="currentPage"
            :pages="pages"
            @navigate="navigateTo">
        </page-indicator>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€ç®¡ç†
        const gameState = {
            hasMap: false,
            hasDecodedMap: false,
            hasCaveClue: false,
            hasMountainClue: false,
            hasKey: false,
            hasSolvedPuzzle: false,
            hasFoundTreasure: false,
            currentPage: 'cover-page',
            unlockedLocations: ['library-page'],
            solvedPuzzles: {
                cave: false,
                mountain: false,
                temple: false
            }
        };
        
        // æ•°å­¦è°œé¢˜
        const puzzles = {
            cave: {
                question: "å¦‚æœæˆ‘æœ‰3ä¸ªè‹¹æœï¼Œä½ ç»™æˆ‘2ä¸ªï¼Œç„¶åæˆ‘åƒæ‰1ä¸ªï¼Œæˆ‘è¿˜å‰©å‡ ä¸ªè‹¹æœï¼Ÿ",
                answer: 4,
                options: [3, 4, 5, 6]
            },
            mountain: {
                question: "15 + 27 ç­‰äºå¤šå°‘ï¼Ÿ",
                answer: 42,
                options: [40, 41, 42, 43]
            },
            temple: {
                question: "ä¸€ä¸ªæ­£æ–¹å½¢çš„è¾¹é•¿æ˜¯5ï¼Œå®ƒçš„é¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ",
                answer: 25,
                options: [20, 25, 30, 35]
            }
        };
        
        // å¯¼èˆªæ ç»„ä»¶
        Vue.component('navigation-bar', {
            props: ['currentPage'],
            template: `
                <div class="nav-bar">
                    <div class="nav-title">å¯»å®æ¸¸æˆï¼šå¤è€ç¥åº™çš„è°œé¢˜</div>
                    <div class="nav-links">
                        <a href="#" class="nav-link" :class="{ active: currentPage === 'cover-page' }" 
                           @click.prevent="$emit('navigate', 'cover-page')">é¦–é¡µ</a>
                        <a href="#" class="nav-link" :class="{ active: currentPage === 'map-page' }" 
                           @click.prevent="$emit('navigate', 'map-page')">åœ°å›¾</a>
                        <a href="#" class="nav-link" :class="{ active: currentPage === 'user-management' }" 
                           @click.prevent="$emit('navigate', 'user-management')">ç”¨æˆ·ç®¡ç†</a>
                        <a href="#" class="nav-link" :class="{ active: currentPage === 'ranking-page' }" 
                           @click.prevent="$emit('navigate', 'ranking-page')">æ’è¡Œæ¦œ</a>
                    </div>
                </div>
            `
        });
        
        // éŸ³ä¹æ§åˆ¶ç»„ä»¶
        Vue.component('music-controls', {
            props: ['musicEnabled', 'muted'],
            template: `
                <div class="music-controls">
                    <div class="music-btn" @click="$emit('toggle-music')">â™ª</div>
                    <div class="music-btn" :class="{ muted: muted }" @click="$emit('toggle-mute')">
                        {{ muted ? 'ğŸ”‡' : 'ğŸ”Š' }}
                    </div>
                </div>
            `
        });
        
        // é¡µé¢æŒ‡ç¤ºå™¨ç»„ä»¶
        Vue.component('page-indicator', {
            props: ['currentPage', 'pages'],
            template: `
                <div class="page-indicator">
                    <div v-for="page in pages" 
                         :key="page.id"
                         class="page-dot" 
                         :class="{ active: currentPage === page.id }"
                         :data-page="page.id"
                         @click="$emit('navigate', page.id)">
                    </div>
                </div>
            `
        });
        
        // å°é¢é¡µç»„ä»¶
        Vue.component('cover-page', {
            template: `
                <div class="page active">
                    <div class="container">
                        <h1 class="animated-text">å¯»å®æ¸¸æˆï¼šå¤è€ç¥åº™çš„è°œé¢˜</h1>
                        <div class="scene">
                            <div class="scene-content">
                                <div class="character pulse">ğŸ§­</div>
                                <div class="object book">ğŸ“š</div>
                                <div class="object temple">ğŸ›•</div>
                                <div class="object cave">ğŸ•³ï¸</div>
                                <div class="object mountain">â›°ï¸</div>
                                <div class="object treasure">ğŸ’</div>
                            </div>
                        </div>
                        <p>è¸ä¸Šå†’é™©ä¹‹æ—…ï¼Œè§£å¼€å¤è€è°œé¢˜ï¼Œå¯»æ‰¾ä¼ è¯´ä¸­çš„å®è—ï¼</p>
                        <div class="controls">
                            <button @click="$emit('start-game')">å¼€å§‹æ¸¸æˆ</button>
                            <button @click="$emit('view-map')">æŸ¥çœ‹åœ°å›¾</button>
                        </div>
                    </div>
                </div>
            `
        });
        
        // åœ°å›¾é¡µç»„ä»¶
        Vue.component('map-page', {
            props: ['gameState'],
            template: `
                <div class="page active">
                    <div class="container">
                        <h2>å†’é™©åœ°å›¾</h2>
                        <div class="map-container">
                            <div v-for="location in locations" 
                                 :key="location.id"
                                 class="location" 
                                 :class="[
                                     location.class,
                                     getLocationStatus(location.id)
                                 ]"
                                 :data-location="location.id"
                                 @click="navigateToLocation(location.id)">
                                {{ location.icon }}
                                <div class="location-name">{{ location.name }}</div>
                            </div>
                        </div>
                        <p>ç‚¹å‡»åœ°å›¾ä¸Šçš„åœ°ç‚¹è¿›è¡Œæ¢ç´¢ã€‚å·²å®Œæˆçš„åœ°ç‚¹ä¼šæ˜¾ç¤ºä¸ºç»¿è‰²ï¼Œå¯å‰å¾€çš„åœ°ç‚¹ä¼šé—ªçƒï¼Œæœªè§£é”çš„åœ°ç‚¹æ˜¾ç¤ºä¸ºç°è‰²ã€‚</p>
                        <div class="controls">
                            <button class="nav-btn" @click="$emit('navigate', 'cover-page')">è¿”å›</button>
                        </div>
                    </div>
                </div>
            `,
            data() {
                return {
                    locations: [
                        { id: 'library-page', name: 'å¤è€å›¾ä¹¦é¦†', icon: 'ğŸ“š', class: 'location-library' },
                        { id: 'cave-page', name: 'ç¥ç§˜æ´ç©´', icon: 'ğŸ•³ï¸', class: 'location-cave' },
                        { id: 'mountain-page', name: 'é«˜å±±ä¹‹å·…', icon: 'â›°ï¸', class: 'location-mountain' },
                        { id: 'temple-page', name: 'å¤è€ç¥åº™', icon: 'ğŸ›•', class: 'location-temple' },
                        { id: 'treasure-page', name: 'å®è—ä¹‹åœ°', icon: 'ğŸ’', class: 'location-treasure' }
                    ]
                };
            },
            methods: {
                getLocationStatus(locationId) {
                    if (this.gameState.unlockedLocations.includes(locationId)) {
                        if (locationId === 'treasure-page' && this.gameState.hasFoundTreasure) {
                            return 'location-completed';
                        } else if (locationId === this.gameState.currentPage) {
                            return 'location-available';
                        } else {
                            return 'location-completed';
                        }
                    } else {
                        return 'location-locked';
                    }
                },
                navigateToLocation(locationId) {
                    if (this.gameState.unlockedLocations.includes(locationId)) {
                        this.$emit('navigate', locationId);
                    }
                }
            }
        });
        
        // å›¾ä¹¦é¦†é¡µç»„ä»¶
        Vue.component('library-page', {
            props: ['gameState'],
            template: `
                <div class="page active">
                    <div class="container">
                        <h2>å¤è€å›¾ä¹¦é¦†</h2>
                        <div class="scene">
                            <div class="scene-content">
                                <div class="character" id="library-character">ğŸ§­</div>
                                <div class="object book pulse" id="ancient-book">ğŸ“š</div>
                            </div>
                        </div>
                        <p>ä½ æ¥åˆ°äº†å¤è€çš„å›¾ä¹¦é¦†ï¼Œè¿™é‡Œå……æ»¡äº†å°˜å°çš„ä¹¦ç±å’Œç¥ç§˜çš„æ°”æ¯ã€‚</p>
                        <progress-bar 
                            :progress="progress"
                            :status-text="statusText">
                        </progress-bar>
                        <action-buttons 
                            :actions="actions"
                            @perform-action="performAction">
                        </action-buttons>
                        <message-log :messages="messages"></message-log>
                        <div class="controls">
                            <button class="nav-btn" @click="$emit('navigate', 'map-page')">è¿”å›åœ°å›¾</button>
                            <button class="nav-btn" @click="$emit('navigate', 'cave-page')" :disabled="!canProceed">å‰å¾€æ´ç©´</button>
                        </div>
                    </div>
                </div>
            `,
            data() {
                return {
                    actions: [
                        { id: 'search', text: 'æœç´¢ä¹¦æ¶' },
                        { id: 'examine', text: 'æ£€æŸ¥å¤ä¹¦' },
                        { id: 'decode', text: 'è§£è¯»åœ°å›¾' }
                    ],
                    messages: [],
                    progress: 0,
                    statusText: 'å¯»æ‰¾çº¿ç´¢...'
                };
            },
            computed: {
                canProceed() {
                    return this.gameState.hasMap && this.gameState.hasDecodedMap;
                }
            },
            methods: {
                performAction(action) {
                    let message;
                    
                    switch(action) {
                        case 'search':
                            message = "ä½ åœ¨ä¹¦æ¶ä¸Šæ‰¾åˆ°äº†ä¸€å¼ å¤è€çš„åœ°å›¾ï¼";
                            this.$emit('update-game-state', { hasMap: true });
                            this.progress = 33;
                            this.statusText = "æ‰¾åˆ°åœ°å›¾ï¼";
                            break;
                        case 'examine':
                            message = "ä½ å‘ç°å¤ä¹¦ä¸­è®°è½½äº†ç¥åº™çš„ç§˜å¯†å…¥å£ï¼";
                            this.$emit('update-game-state', { hasDecodedMap: true });
                            this.progress = 66;
                            this.statusText = "è·å¾—é‡è¦çº¿ç´¢ï¼";
                            break;
                        case 'decode':
                            if (this.gameState.hasMap) {
                                message = "ä½ æˆåŠŸè§£è¯»äº†åœ°å›¾ï¼Œå‘ç°å®è—è—åœ¨ç¥åº™ä¸­ï¼";
                                this.progress = 100;
                                this.statusText = "åœ°å›¾è§£è¯»å®Œæˆï¼";
                                
                                // è§£é”æ´ç©´
                                if (!this.gameState.unlockedLocations.includes('cave-page')) {
                                    this.$emit('update-game-state', { 
                                        unlockedLocations: [...this.gameState.unlockedLocations, 'cave-page'] 
                                    });
                                }
                            } else {
                                message = "ä½ éœ€è¦å…ˆæ‰¾åˆ°åœ°å›¾æ‰èƒ½è¿›è¡Œè§£è¯»ï¼";
                                this.addMessage(message, 'danger');
                                return;
                            }
                            break;
                    }
                    
                    this.addMessage(message, 'success');
                },
                addMessage(text, type = '') {
                    this.messages.push({ text, type, timestamp: new Date() });
                }
            },
            mounted() {
                // æ¢å¤è¿›åº¦
                if (this.gameState.hasMap) this.progress = 33;
                if (this.gameState.hasDecodedMap) this.progress = 66;
                if (this.gameState.hasMap && this.gameState.hasDecodedMap) this.progress = 100;
            }
        });
        
        // æ´ç©´é¡µç»„ä»¶
        Vue.component('cave-page', {
            props: ['gameState'],
            template: `
                <div class="page active">
                    <div class="container">
                        <h2>ç¥ç§˜æ´ç©´</h2>
                        <div class="scene">
                            <div class="scene-content">
                                <div class="character" id="cave-character">ğŸ§­</div>
                                <div class="object cave">ğŸ•³ï¸</div>
                            </div>
                        </div>
                        <p>ä½ è¿›å…¥äº†é»‘æš—çš„æ´ç©´ï¼Œè¿™é‡Œå……æ»¡äº†æœªçŸ¥çš„å±é™©å’Œç§˜å¯†ã€‚</p>
                        
                        <!-- æ•°å­¦è°œé¢˜ -->
                        <puzzle-component 
                            v-if="showPuzzle"
                            :puzzle="puzzles.cave"
                            @submit-answer="checkPuzzleAnswer">
                        </puzzle-component>
                        
                        <progress-bar 
                            :progress="progress"
                            :status-text="statusText">
                        </progress-bar>
                        <action-buttons 
                            :actions="actions"
                            @perform-action="performAction">
                        </action-buttons>
                        <message-log :messages="messages"></message-log>
                        <div class="controls">
                            <button class="nav-btn" @click="$emit('navigate', 'map-page')">è¿”å›åœ°å›¾</button>
                            <button class="nav-btn" @click="$emit('navigate', 'mountain-page')" :disabled="!canProceed">å‰å¾€é«˜å±±</button>
                        </div>
                    </div>
                </div>
            `,
            data() {
                return {
                    puzzles,
                    actions: [
                        { id: 'explore', text: 'æ·±å…¥æ¢ç´¢' },
                        { id: 'paintings', text: 'æŸ¥çœ‹å£ç”»' },
                        { id: 'search-cave', text: 'å¯»æ‰¾çº¿ç´¢' }
                    ],
                    messages: [],
                    progress: 0,
                    statusText: 'æ¢ç´¢æ´ç©´...',
                    showPuzzle: false
                };
            },
            computed: {
                canProceed() {
                    return this.gameState.hasCaveClue && this.gameState.hasKey;
                }
            },
            methods: {
                performAction(action) {
                    let message;
                    
                    switch(action) {
                        case 'explore':
                            message = "ä½ åœ¨æ´ç©´æ·±å¤„å‘ç°äº†ä¸€å¹…ç¥ç§˜çš„å£ç”»ï¼";
                            this.$emit('update-game-state', { hasCaveClue: true });
                            this.progress = 33;
                            this.statusText = "å‘ç°å£ç”»ï¼";
                            break;
                        case 'paintings':
                            if (this.gameState.hasCaveClue) {
                                message = "å£ç”»æ˜¾ç¤ºå®è—è—åœ¨ç¥åº™æ·±å¤„ï¼";
                                this.progress = 66;
                                this.statusText = "è§£è¯»å£ç”»æˆåŠŸï¼";
                            } else {
                                message = "ä½ éœ€è¦å…ˆæ¢ç´¢æ´ç©´æ‰¾åˆ°å£ç”»ï¼";
                                this.addMessage(message, 'danger');
                                return;
                            }
                            break;
                        case 'search-cave':
                            if (!this.gameState.solvedPuzzles.cave) {
                                this.showPuzzle = true;
                                message = "ä½ å‘ç°äº†ä¸€ä¸ªå¤è€çš„æ•°å­¦è°œé¢˜ï¼è§£è°œåæ‰èƒ½æ‰¾åˆ°é’¥åŒ™ã€‚";
                            } else {
                                message = "ä½ å·²ç»æ‰¾åˆ°äº†é’¥åŒ™ï¼";
                            }
                            break;
                    }
                    
                    this.addMessage(message, 'success');
                },
                checkPuzzleAnswer(answer) {
                    if (parseInt(answer) === this.puzzles.cave.answer) {
                        this.addMessage("ç­”æ¡ˆæ­£ç¡®ï¼è°œé¢˜è§£å¼€äº†ï¼", 'success');
                        this.showPuzzle = false;
                        
                        this.$emit('update-game-state', { 
                            solvedPuzzles: { ...this.gameState.solvedPuzzles, cave: true },
                            hasKey: true
                        });
                        
                        this.progress = 100;
                        
                        // è§£é”é«˜å±±
                        if (!this.gameState.unlockedLocations.includes('mountain-page')) {
                            this.$emit('update-game-state', { 
                                unlockedLocations: [...this.gameState.unlockedLocations, 'mountain-page'] 
                            });
                        }
                    } else {
                        this.addMessage("ç­”æ¡ˆé”™è¯¯ï¼Œè¯·å†è¯•ä¸€æ¬¡ï¼", 'danger');
                    }
                },
                addMessage(text, type = '') {
                    this.messages.push({ text, type, timestamp: new Date() });
                }
            },
            mounted() {
                // æ¢å¤è¿›åº¦
                if (this.gameState.hasCaveClue) this.progress = 33;
                if (this.gameState.hasKey) this.progress = 100;
            }
        });
        
        // é«˜å±±é¡µç»„ä»¶
        Vue.component('mountain-page', {
            props: ['gameState'],
            template: `
                <div class="page active">
                    <div class="container">
                        <h2>é«˜å±±ä¹‹å·…</h2>
                        <div class="scene">
                            <div class="scene-content">
                                <div class="character" id="mountain-character">ğŸ§­</div>
                                <div class="object mountain">â›°ï¸</div>
                            </div>
                        </div>
                        <p>ä½ ç™»ä¸Šäº†é«˜å±±ä¹‹å·…ï¼Œä»è¿™é‡Œå¯ä»¥ä¿¯ç°æ•´ä¸ªå±±è°·ã€‚</p>
                        
                        <!-- æ•°å­¦è°œé¢˜ -->
                        <puzzle-component 
                            v-if="showPuzzle"
                            :puzzle="puzzles.mountain"
                            @submit-answer="checkPuzzleAnswer">
                        </puzzle-component>
                        
                        <progress-bar 
                            :progress="progress"
                            :status-text="statusText">
                        </progress-bar>
                        <action-buttons 
                            :actions="actions"
                            @perform-action="performAction">
                        </action-buttons>
                        <message-log :messages="messages"></message-log>
                        <div class="controls">
                            <button class="nav-btn" @click="$emit('navigate', 'map-page')">è¿”å›åœ°å›¾</button>
                            <button class="nav-btn" @click="$emit('navigate', 'temple-page')" :disabled="!canProceed">å‰å¾€ç¥åº™</button>
                        </div>
                    </div>
                </div>
            `,
            data() {
                return {
                    puzzles,
                    actions: [
                        { id: 'search-mountain', text: 'æœç´¢å±±é¡¶' },
                        { id: 'view', text: 'è§‚å¯Ÿåœ°å½¢' },
                        { id: 'find-path', text: 'å¯»æ‰¾è·¯å¾„' }
                    ],
                    messages: [],
                    progress: 0,
                    statusText: 'å¯»æ‰¾çº¿ç´¢...',
                    showPuzzle: false
                };
            },
            computed: {
                canProceed() {
                    return this.gameState.hasMountainClue;
                }
            },
            methods: {
                performAction(action) {
                    let message;
                    
                    switch(action) {
                        case 'search-mountain':
                            message = "ä½ åœ¨å±±é¡¶æ‰¾åˆ°äº†ç¥åº™çš„éšè—å…¥å£ï¼";
                            this.$emit('update-game-state', { hasMountainClue: true });
                            this.progress = 33;
                            this.statusText = "å‘ç°å…¥å£ï¼";
                            break;
                        case 'view':
                            if (this.gameState.hasMountainClue) {
                                message = "ä½ ä»å±±é¡¶çœ‹åˆ°äº†ç¥åº™çš„å…¨è²Œï¼";
                                this.progress = 66;
                                this.statusText = "è§‚å¯Ÿå®Œæˆï¼";
                            } else {
                                message = "ä½ éœ€è¦å…ˆæœç´¢å±±é¡¶æ‰¾åˆ°å…¥å£ï¼";
                                this.addMessage(message, 'danger');
                                return;
                            }
                            break;
                        case 'find-path':
                            if (!this.gameState.solvedPuzzles.mountain) {
                                this.showPuzzle = true;
                                message = "ä½ å‘ç°äº†ä¸€ä¸ªæ•°å­¦è°œé¢˜ï¼è§£è°œåæ‰èƒ½æ‰¾åˆ°é€šå¾€ç¥åº™çš„è·¯å¾„ã€‚";
                            } else {
                                message = "ä½ å·²ç»æ‰¾åˆ°äº†é€šå¾€ç¥åº™çš„è·¯å¾„ï¼";
                            }
                            break;
                    }
                    
                    this.addMessage(message, 'success');
                },
                checkPuzzleAnswer(answer) {
                    if (parseInt(answer) === this.puzzles.mountain.answer) {
                        this.addMessage("ç­”æ¡ˆæ­£ç¡®ï¼è°œé¢˜è§£å¼€äº†ï¼", 'success');
                        this.showPuzzle = false;
                        
                        this.$emit('update-game-state', { 
                            solvedPuzzles: { ...this.gameState.solvedPuzzles, mountain: true }
                        });
                        
                        this.progress = 100;
                        
                        // è§£é”ç¥åº™
                        if (!this.gameState.unlockedLocations.includes('temple-page')) {
                            this.$emit('update-game-state', { 
                                unlockedLocations: [...this.gameState.unlockedLocations, 'temple-page'] 
                            });
                        }
                    } else {
                        this.addMessage("ç­”æ¡ˆé”™è¯¯ï¼Œè¯·å†è¯•ä¸€æ¬¡ï¼", 'danger');
                    }
                },
                addMessage(text, type = '') {
                    this.messages.push({ text, type, timestamp: new Date() });
                }
            },
            mounted() {
                // æ¢å¤è¿›åº¦
                if (this.gameState.hasMountainClue) this.progress = 33;
            }
        });
        
        // ç¥åº™é¡µç»„ä»¶
        Vue.component('temple-page', {
            props: ['gameState'],
            template: `
                <div class="page active">
                    <div class="container">
                        <h2>å¤è€ç¥åº™</h2>
                        <div class="scene">
                            <div class="scene-content">
                                <div class="character" id="temple-character">ğŸ§­</div>
                                <div class="object temple">ğŸ›•</div>
                                <div class="object treasure" id="treasure-chest" :class="{ pulse: gameState.hasKey && gameState.hasSolvedPuzzle }">ğŸ’</div>
                            </div>
                        </div>
                        <p>ä½ æ¥åˆ°äº†å¤è€çš„ç¥åº™ï¼Œè¿™é‡Œå……æ»¡äº†ç¥ç§˜çš„èƒ½é‡ã€‚</p>
                        
                        <!-- æ•°å­¦è°œé¢˜ -->
                        <puzzle-component 
                            v-if="showPuzzle"
                            :puzzle="puzzles.temple"
                            @submit-answer="checkPuzzleAnswer">
                        </puzzle-component>
                        
                        <progress-bar 
                            :progress="progress"
                            :status-text="statusText">
                        </progress-bar>
                        <action-buttons 
                            :actions="actions"
                            @perform-action="performAction">
                        </action-buttons>
                        <message-log :messages="messages"></message-log>
                        <div class="controls">
                            <button class="nav-btn" @click="$emit('navigate', 'map-page')">è¿”å›åœ°å›¾</button>
                            <button class="nav-btn" @click="$emit('navigate', 'treasure-page')" :disabled="!canProceed">æŸ¥çœ‹å®è—</button>
                        </div>
                    </div>
                </div>
            `,
            data() {
                return {
                    puzzles,
                    actions: [
                        { id: 'puzzle', text: 'è§£å¼€è°œé¢˜' },
                        { id: 'key', text: 'å¯»æ‰¾é’¥åŒ™' },
                        { id: 'open', text: 'æ‰“å¼€å®ç®±' }
                    ],
                    messages: [],
                    progress: 0,
                    statusText: 'è§£å¼€è°œé¢˜...',
                    showPuzzle: false
                };
            },
            computed: {
                canProceed() {
                    return this.gameState.hasKey && this.gameState.hasSolvedPuzzle;
                }
            },
            methods: {
                performAction(action) {
                    let message;
                    
                    switch(action) {
                        case 'puzzle':
                            if (!this.gameState.solvedPuzzles.temple) {
                                this.showPuzzle = true;
                                message = "ä½ å‘ç°äº†ä¸€ä¸ªå¤è€çš„æ•°å­¦è°œé¢˜ï¼è§£è°œåæ‰èƒ½æ‰“å¼€å®ç®±ã€‚";
                            } else {
                                message = "ä½ å·²ç»è§£å¼€äº†ç¥åº™çš„è°œé¢˜ï¼";
                            }
                            break;
                        case 'key':
                            if (this.gameState.hasKey) {
                                message = "ä½ å·²ç»æœ‰äº†é’¥åŒ™ï¼";
                                this.progress = 66;
                                this.statusText = "é’¥åŒ™å·²å‡†å¤‡ï¼";
                            } else {
                                message = "ä½ éœ€è¦åœ¨æ´ç©´ä¸­å¯»æ‰¾é’¥åŒ™ï¼";
                                this.addMessage(message, 'danger');
                                return;
                            }
                            break;
                        case 'open':
                            if (this.gameState.hasKey && this.gameState.hasSolvedPuzzle) {
                                message = "å®ç®±æ‰“å¼€äº†ï¼é‡Œé¢æ˜¯ä¼ è¯´ä¸­çš„æ™ºæ…§ä¹‹çŸ³ï¼";
                                this.progress = 100;
                                this.statusText = "å®è—æ‰¾åˆ°ï¼";
                                
                                // è§£é”å®è—é¡µ
                                if (!this.gameState.unlockedLocations.includes('treasure-page')) {
                                    this.$emit('update-game-state', { 
                                        unlockedLocations: [...this.gameState.unlockedLocations, 'treasure-page'] 
                                    });
                                }
                            } else {
                                message = "ä½ éœ€è¦å…ˆæ‰¾åˆ°é’¥åŒ™å¹¶è§£å¼€è°œé¢˜æ‰èƒ½æ‰“å¼€å®ç®±ï¼";
                                this.addMessage(message, 'danger');
                                return;
                            }
                            break;
                    }
                    
                    this.addMessage(message, 'success');
                },
                checkPuzzleAnswer(answer) {
                    if (parseInt(answer) === this.puzzles.temple.answer) {
                        this.addMessage("ç­”æ¡ˆæ­£ç¡®ï¼è°œé¢˜è§£å¼€äº†ï¼", 'success');
                        this.showPuzzle = false;
                        
                        this.$emit('update-game-state', { 
                            solvedPuzzles: { ...this.gameState.solvedPuzzles, temple: true },
                            hasSolvedPuzzle: true
                        });
                        
                        this.progress = 33;
                    } else {
                        this.addMessage("ç­”æ¡ˆé”™è¯¯ï¼Œè¯·å†è¯•ä¸€æ¬¡ï¼", 'danger');
                    }
                },
                addMessage(text, type = '') {
                    this.messages.push({ text, type, timestamp: new Date() });
                }
            },
            mounted() {
                // æ¢å¤è¿›åº¦
                if (this.gameState.hasSolvedPuzzle) this.progress = 33;
                if (this.gameState.hasKey) this.progress = 66;
                if (this.gameState.hasKey && this.gameState.hasSolvedPuzzle) this.progress = 100;
            }
        });
        
        // å®è—é¡µç»„ä»¶
        Vue.component('treasure-page', {
            template: `
                <div class="page active">
                    <div class="container">
                        <h2>å®è—å‘ç°</h2>
                        <div class="scene">
                            <div class="scene-content">
                                <div class="character">ğŸ§­</div>
                                <div class="object treasure treasure-glow" style="opacity: 1; transform: scale(1.5);">ğŸ’</div>
                            </div>
                        </div>
                        <p>æ­å–œä½ ï¼ä½ æˆåŠŸæ‰¾åˆ°äº†ä¼ è¯´ä¸­çš„å®è—ï¼</p>
                        <div class="message-log">
                            <div class="message success">ä½ è§£å¼€äº†æ‰€æœ‰è°œé¢˜ï¼Œæ‰¾åˆ°äº†æ™ºæ…§ä¹‹çŸ³ï¼</div>
                            <div class="message success">è¿™é¢—å®çŸ³å°†èµ‹äºˆä½ æ— å°½çš„çŸ¥è¯†å’Œæ™ºæ…§ï¼</div>
                        </div>
                        <div class="controls">
                            <button @click="$emit('play-again')">å†ç©ä¸€æ¬¡</button>
                        </div>
                    </div>
                </div>
            `
        });
        
        // ç”¨æˆ·ç®¡ç†é¡µç»„ä»¶
        Vue.component('user-management', {
            props: ['users'],
            template: `
                <div class="page active">
                    <div class="container user-management">
                        <h2>ç”¨æˆ·ç®¡ç†</h2>
                        <div class="user-form">
                            <div class="form-group">
                                <label class="form-label">ç”¨æˆ·å</label>
                                <input type="text" class="form-input" v-model="newUser.username">
                            </div>
                            <div class="form-group">
                                <label class="form-label">å¯†ç </label>
                                <input type="password" class="form-input" v-model="newUser.password">
                            </div>
                            <div class="form-group">
                                <label class="form-label">é‚®ç®±</label>
                                <input type="email" class="form-input" v-model="newUser.email">
                            </div>
                            <button @click="addUser">æ·»åŠ ç”¨æˆ·</button>
                        </div>
                        
                        <h3>ç”¨æˆ·åˆ—è¡¨</h3>
                        <div class="ranking-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>ç”¨æˆ·å</th>
                                        <th>é‚®ç®±</th>
                                        <th>æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="user in users" :key="user.id">
                                        <td>{{ user.id }}</td>
                                        <td>{{ user.username }}</td>
                                        <td>{{ user.email }}</td>
                                        <td>
                                            <button @click="deleteUser(user.id)">åˆ é™¤</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="controls">
                            <button class="nav-btn" @click="$emit('navigate', 'cover-page')">è¿”å›é¦–é¡µ</button>
                        </div>
                    </div>
                </div>
            `,
            data() {
                return {
                    newUser: {
                        username: '',
                        password: '',
                        email: ''
                    }
                };
            },
            methods: {
                addUser() {
                    if (this.newUser.username && this.newUser.password && this.newUser.email) {
                        this.$emit('add-user', { ...this.newUser });
                        this.newUser = { username: '', password: '', email: '' };
                    }
                },
                deleteUser(userId) {
                    this.$emit('delete-user', userId);
                }
            }
        });
        
        // æ’è¡Œé¡µç»„ä»¶
        Vue.component('ranking-page', {
            props: ['rankings'],
            template: `
                <div class="page active">
                    <div class="container ranking-page">
                        <h2>æ¸¸æˆæ’è¡Œæ¦œ</h2>
                        <div class="ranking-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>æ’å</th>
                                        <th>ç©å®¶</th>
                                        <th>å®Œæˆæ—¶é—´</th>
                                        <th>å¾—åˆ†</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="(ranking, index) in rankings" :key="ranking.id">
                                        <td class="ranking-position">{{ index + 1 }}</td>
                                        <td>{{ ranking.player }}</td>
                                        <td>{{ ranking.completionTime }}</td>
                                        <td>{{ ranking.score }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="controls">
                            <button class="nav-btn" @click="$emit('navigate', 'cover-page')">è¿”å›é¦–é¡µ</button>
                        </div>
                    </div>
                </div>
            `
        });
        
        // è¿›åº¦æ¡ç»„ä»¶
        Vue.component('progress-bar', {
            props: ['progress', 'statusText'],
            template: `
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" :style="{ width: progress + '%' }"></div>
                    </div>
                    <div class="status-text">{{ statusText }}</div>
                </div>
            `
        });
        
        // åŠ¨ä½œæŒ‰é’®ç»„ä»¶
        Vue.component('action-buttons', {
            props: ['actions'],
            template: `
                <div class="action-buttons">
                    <button v-for="action in actions" 
                            :key="action.id"
                            class="action-btn" 
                            :data-action="action.id"
                            @click="$emit('perform-action', action.id)">
                        {{ action.text }}
                    </button>
                </div>
            `
        });
        
        // æ¶ˆæ¯æ—¥å¿—ç»„ä»¶
        Vue.component('message-log', {
            props: ['messages'],
            template: `
                <div class="message-log">
                    <div v-for="message in messages" 
                         :key="message.timestamp"
                         class="message" 
                         :class="message.type">
                        {{ message.text }}
                    </div>
                </div>
            `
        });
        
        // è°œé¢˜ç»„ä»¶
        Vue.component('puzzle-component', {
            props: ['puzzle'],
            template: `
                <div class="puzzle-container">
                    <h3>è°œé¢˜</h3>
                    <p class="puzzle-question">{{ puzzle.question }}</p>
                    <div class="puzzle-options">
                        <div v-for="option in puzzle.options" 
                             :key="option"
                             class="puzzle-option"
                             @click="selectOption(option)">
                            {{ option }}
                        </div>
                    </div>
                    <input type="number" class="puzzle-input" v-model="userAnswer" placeholder="è¾“å…¥ç­”æ¡ˆ">
                    <button class="puzzle-submit" @click="submitAnswer">æäº¤ç­”æ¡ˆ</button>
                </div>
            `,
            data() {
                return {
                    userAnswer: ''
                };
            },
            methods: {
                selectOption(option) {
                    this.userAnswer = option;
                },
                submitAnswer() {
                    this.$emit('submit-answer', this.userAnswer);
                }
            }
        });
        
        // Vueå®ä¾‹
        new Vue({
            el: '#app',
            data: {
                currentPage: 'cover-page',
                pages: [
                    { id: 'cover-page' },
                    { id: 'map-page' },
                    { id: 'library-page' },
                    { id: 'cave-page' },
                    { id: 'mountain-page' },
                    { id: 'temple-page' },
                    { id: 'treasure-page' },
                    { id: 'user-management' },
                    { id: 'ranking-page' }
                ],
                gameState: { ...gameState },
                musicEnabled: true,
                muted: false,
                users: [
                    { id: 1, username: 'æ¢é™©å®¶1å·', password: '123456', email: 'explorer1@example.com' },
                    { id: 2, username: 'å®è—çŒäºº', password: '654321', email: 'treasure@example.com' }
                ],
                rankings: [
                    { id: 1, player: 'æ¢é™©å®¶1å·', completionTime: '25åˆ†é’Ÿ', score: 950 },
                    { id: 2, player: 'å®è—çŒäºº', completionTime: '30åˆ†é’Ÿ', score: 880 },
                    { id: 3, player: 'å†’é™©ç‹', completionTime: '35åˆ†é’Ÿ', score: 820 }
                ],
                nextUserId: 3
            },
            methods: {
                navigateTo(page) {
                    this.currentPage = page;
                    this.gameState.currentPage = page;
                    this.saveGameState();
                },
                updateGameState(updates) {
                    this.gameState = { ...this.gameState, ...updates };
                    this.saveGameState();
                },
                toggleMusic() {
                    this.musicEnabled = !this.musicEnabled;
                },
                toggleMute() {
                    this.muted = !this.muted;
                },
                addUser(user) {
                    this.users.push({
                        id: this.nextUserId++,
                        ...user
                    });
                },
                deleteUser(userId) {
                    this.users = this.users.filter(user => user.id !== userId);
                },
                resetGame() {
                    this.gameState = { ...gameState };
                    this.currentPage = 'cover-page';
                    localStorage.removeItem('treasureGameState');
                },
                saveGameState() {
                    try {
                        localStorage.setItem('treasureGameState', JSON.stringify(this.gameState));
                    } catch (e) {
                        console.error('ä¿å­˜æ¸¸æˆçŠ¶æ€å¤±è´¥:', e);
                    }
                },
                loadGameState() {
                    try {
                        const savedState = localStorage.getItem('treasureGameState');
                        if (savedState) {
                            this.gameState = { ...this.gameState, ...JSON.parse(savedState) };
                            this.currentPage = this.gameState.currentPage;
                        }
                    } catch (e) {
                        console.error('åŠ è½½æ¸¸æˆçŠ¶æ€å¤±è´¥:', e);
                    }
                }
            },
            mounted() {
                this.loadGameState();
            }
        });
    </script>
</body>
</html>